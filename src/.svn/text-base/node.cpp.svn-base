/*
 * node.cpp
 *
 *  Created on: June 20, 2011
 *      Author: HJMeijdam
 */

#include <ros/ros.h>
#include <mprl_ros/agent_node.h>
#include "agent.h"


using namespace mprl;

int main(int argc, char **argv)
{
  ros::init(argc, argv, "agentm");
  
  Configuration config;
  int verbose = 0, c;

  while ((c = getopt(argc, argv, "c:v")) != -1)
  {
    switch (c)
    {
      case 'v':
        verbose++;
        break;
      case 'c':
        config.set("config_path", optarg);
        break;
      default:
        ros::shutdown();
        return 1;
    }
  }

  config.set("verbose", verbose);
  
  AgentNode node;

  ROS_INFO("Starting AgentM agent");

  node.init(new MAgent(), &config);
  node.spin();

  ros::shutdown();

  return 0;
}
